<cdk-virtual-scroll-viewport itemSize="80" class="infinite-container">
  <nz-list nzBordered nzSize="small" nzItemLayout="vertical">
    <nz-list-item *cdkVirtualFor="let rating of ratings">
      <nz-comment
        [nzAuthor]="
          showMedia
            ? (rating.mediaId | mediaName | async) ?? 'No name'
            : (rating.userId | username | async) ?? 'No name'
        "
        nzDatetime="{{ rating.createdAt | date : 'dd/MM/yyyy HH:mm' }}">
        <nz-comment-content (click)="$event.preventDefault()">
          <app-rating-view
            [rating]="rating"
            [editable]="editable"></app-rating-view>
        </nz-comment-content>
        <nz-comment-action>
          <button
            *ngIf="showMedia"
            [routerLink]="
              showMedia ? (rating.mediaId | mediaLink | async) ?? '' : '/'
            "
            nz-button
            nzType="link"
            nzSize="small">
            <i nz-icon nzType="eye"></i>
          </button>
          <button
            *ngIf="!showMedia"
            [routerLink]="[userViewLink, rating.userId]"
            nz-button
            nzType="link"
            nzSize="small">
            <i nz-icon nzType="eye"></i>
          </button>
        </nz-comment-action>
      </nz-comment>
    </nz-list-item>
  </nz-list>
</cdk-virtual-scroll-viewport>
