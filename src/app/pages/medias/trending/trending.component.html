<nz-page-header nzTitle="Tendances"></nz-page-header>

<nz-tabset nzSize="large" [nzTabBarExtraContent]="onlyAvailable">
  <nz-tab nzTitle="Films populaires">
    <nz-skeleton
      *ngIf="popularMovies.length === 0"
      [nzActive]="true"
      [nzParagraph]="{ rows: 10 }"></nz-skeleton>
    <nz-card
      [nzExtra]="popularMoviesPagination"
      [nzActions]="[popularMoviesPagination]">
      <app-movie-list [movies]="popularMovies"></app-movie-list>
    </nz-card>
  </nz-tab>
  <nz-tab nzTitle="Films récents">
    <nz-card>
      <app-movie-list [movies]="recentMovies"></app-movie-list>
    </nz-card>
  </nz-tab>
  <nz-tab nzTitle="Séries populaires">
    <nz-skeleton
      *ngIf="popularTvShows.length === 0"
      [nzActive]="true"
      [nzParagraph]="{ rows: 10 }"></nz-skeleton>
    <nz-card
      [nzExtra]="popularTvShowsPagination"
      [nzActions]="[popularTvShowsPagination]">
      <app-tv-list [tvShows]="popularTvShows"></app-tv-list>
    </nz-card>
  </nz-tab>
  <nz-tab nzTitle="Séries récentes">
    <nz-card>
      <app-tv-list [tvShows]="recentTvShows"></app-tv-list>
    </nz-card>
  </nz-tab>
</nz-tabset>

<ng-template #popularMoviesPagination>
  <div (click)="$event.stopPropagation()">
    <nz-pagination
      [nzPageIndex]="popularMoviesPage"
      [nzTotal]="Math.min(popularMoviesTotalResults, 1000)"
      [nzPageSize]="20"
      (nzPageIndexChange)="onPopularMoviesPageChange($event)">
    </nz-pagination>
  </div>
</ng-template>
<ng-template #popularTvShowsPagination>
  <div (click)="$event.stopPropagation()">
    <nz-pagination
      [nzPageIndex]="popularTvShowsPage"
      [nzTotal]="Math.min(popularTvShowsTotalResults, 1000)"
      [nzPageSize]="20"
      (nzPageIndexChange)="onPopularTvShowsPageChange($event)">
    </nz-pagination>
  </div>
</ng-template>

<ng-template #onlyAvailable>
  <label
    nz-checkbox
    (nzCheckedChange)="onOnlyAvailableChecked($event.valueOf())">
    Disponibles
  </label>
</ng-template>
